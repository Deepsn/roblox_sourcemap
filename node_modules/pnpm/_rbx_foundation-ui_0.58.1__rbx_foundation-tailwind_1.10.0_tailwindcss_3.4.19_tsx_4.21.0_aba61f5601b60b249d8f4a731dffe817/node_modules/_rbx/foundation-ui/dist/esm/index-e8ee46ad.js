import*as e from"react";import n from"react";import{jsx as t}from"react/jsx-runtime";function r(...n){const t=n[0];if(1===n.length)return t;const r=()=>{const r=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const o=r.reduce(((e,{useScope:t,scopeName:r})=>({...e,...t(n)[`__scope${r}`]})),{});return e.useMemo((()=>({[`__scope${t.scopeName}`]:o})),[o])}};return r.scopeName=t.scopeName,r}function o(e,n){if("function"==typeof e)return e(n);null!=e&&(e.current=n)}function c(...e){return n=>{let t=!1;const r=e.map((e=>{const r=o(e,n);return t||"function"!=typeof r||(t=!0),r}));if(t)return()=>{for(let n=0;n<r.length;n++){const t=r[n];"function"==typeof t?t():o(e[n],null)}}}}function i(...n){return e.useCallback(c(...n),n)}function l(n){const r=s(n),o=e.forwardRef(((n,o)=>{const{children:c,...i}=n,l=e.Children.toArray(c),s=l.find(f);if(s){const n=s.props.children,c=l.map((t=>t===s?e.Children.count(n)>1?e.Children.only(null):e.isValidElement(n)?n.props.children:null:t));return t(r,{...i,ref:o,children:e.isValidElement(n)?e.cloneElement(n,void 0,c):null})}return t(r,{...i,ref:o,children:c})}));return o.displayName=`${n}.Slot`,o}function s(n){const t=e.forwardRef(((n,t)=>{const{children:r,...o}=n;if(e.isValidElement(r)){const n=function(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;if(t)return e.ref;if(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,n){const t={...n};for(const r in n){const o=e[r],c=n[r];/^on[A-Z]/.test(r)?o&&c?t[r]=(...e)=>{c(...e),o(...e)}:o&&(t[r]=o):"style"===r?t[r]={...o,...c}:"className"===r&&(t[r]=[o,c].filter(Boolean).join(" "))}return{...e,...t}}(o,r.props);return r.type!==e.Fragment&&(i.ref=t?c(t,n):n),e.cloneElement(r,i)}return e.Children.count(r)>1?e.Children.only(null):null}));return t.displayName=`${n}.SlotClone`,t}var u=Symbol("radix.slottable");function f(n){return e.isValidElement(n)&&"function"==typeof n.type&&"__radixId"in n.type&&n.type.__radixId===u}function a(o){const c=o+"CollectionProvider",[s,u]=function(n,o=[]){let c=[];const i=()=>{const t=c.map((n=>e.createContext(n)));return function(r){const o=r?.[n]||t;return e.useMemo((()=>({[`__scope${n}`]:{...r,[n]:o}})),[r,o])}};return i.scopeName=n,[function(r,o){const i=e.createContext(o),l=c.length;c=[...c,o];const s=r=>{const{scope:o,children:c,...s}=r,u=o?.[n]?.[l]||i,f=e.useMemo((()=>s),Object.values(s));return t(u.Provider,{value:f,children:c})};return s.displayName=r+"Provider",[s,function(t,c){const s=c?.[n]?.[l]||i,u=e.useContext(s);if(u)return u;if(void 0!==o)return o;throw new Error(`\`${t}\` must be used within \`${r}\``)}]},r(i,...o)]}(c),[f,a]=s(c,{collectionRef:{current:null},itemMap:new Map}),p=e=>{const{scope:r,children:o}=e,c=n.useRef(null),i=n.useRef(new Map).current;return t(f,{scope:r,itemMap:i,collectionRef:c,children:o})};p.displayName=c;const d=o+"CollectionSlot",m=l(d),h=n.forwardRef(((e,n)=>{const{scope:r,children:o}=e,c=i(n,a(d,r).collectionRef);return t(m,{ref:c,children:o})}));h.displayName=d;const y=o+"CollectionItemSlot",C="data-radix-collection-item",R=l(y),N=n.forwardRef(((e,r)=>{const{scope:o,children:c,...l}=e,s=n.useRef(null),u=i(r,s),f=a(y,o);return n.useEffect((()=>(f.itemMap.set(s,{ref:s,...l}),()=>{f.itemMap.delete(s)}))),t(R,{[C]:"",ref:u,children:c})}));return N.displayName=y,[{Provider:p,Slot:h,ItemSlot:N},function(e){const t=a(o+"CollectionConsumer",e);return n.useCallback((()=>{const e=t.collectionRef.current;if(!e)return[];const n=Array.from(e.querySelectorAll(`[${C}]`));return Array.from(t.itemMap.values()).sort(((e,t)=>n.indexOf(e.ref.current)-n.indexOf(t.ref.current)))}),[t.collectionRef,t.itemMap])},u]}export{a as c};
