import*as e from"react";import n from"clsx";import{jsx as t}from"react/jsx-runtime";import{h as r,R as o,u as i,F as a,D as s,P as c}from"../index-19da5741.js";import{u}from"../index-93159332.js";import{c as l,A as d,C as p,a as f,R as m}from"../index-863a9f28.js";import"react-dom";import"../Common-263e2f31.js";import"../tslib.es6-e609138c.js";import"../floating-ui.react-dom-1c70e5df.js";import"../style-inject.es-e87a8d02.js";function h(e,n,{checkForDefaultPrevented:t=!0}={}){return function(r){if(e?.(r),!1===t||!r.defaultPrevented)return n?.(r)}}function v(e,n){if("function"==typeof e)return e(n);null!=e&&(e.current=n)}function g(...e){return n=>{let t=!1;const r=e.map((e=>{const r=v(e,n);return t||"function"!=typeof r||(t=!0),r}));if(t)return()=>{for(let n=0;n<r.length;n++){const t=r[n];"function"==typeof t?t():v(e[n],null)}}}}function C(...n){return e.useCallback(g(...n),n)}function y(...n){const t=n[0];if(1===n.length)return t;const r=()=>{const r=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const o=r.reduce(((e,{useScope:t,scopeName:r})=>({...e,...t(n)[`__scope${r}`]})),{});return e.useMemo((()=>({[`__scope${t.scopeName}`]:o})),[o])}};return r.scopeName=t.scopeName,r}var N=globalThis?.document?e.useLayoutEffect:()=>{};var O=n=>{const{present:t,children:r}=n,o=function(n){const[t,r]=e.useState(),o=e.useRef({}),i=e.useRef(n),a=e.useRef("none"),s=n?"mounted":"unmounted",[c,u]=function(n,t){return e.useReducer(((e,n)=>t[e][n]??e),n)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect((()=>{const e=P(o.current);a.current="mounted"===c?e:"none"}),[c]),N((()=>{const e=o.current,t=i.current;if(t!==n){const r=a.current,o=P(e);if(n)u("MOUNT");else if("none"===o||"none"===e?.display)u("UNMOUNT");else{u(t&&r!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=n}}),[n,u]),N((()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,r=r=>{const a=P(o.current).includes(r.animationName);if(r.target===t&&a&&(u("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)}))}},s=e=>{e.target===t&&(a.current=P(o.current))};return t.addEventListener("animationstart",s),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",s),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}u("ANIMATION_END")}),[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:e.useCallback((e=>{e&&(o.current=getComputedStyle(e)),r(e)}),[])}}(t),i="function"==typeof r?r({present:o.isPresent}):e.Children.only(r),a=C(o.ref,function(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;if(t)return e.ref;if(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof r||o.isPresent?e.cloneElement(i,{ref:a}):null};function P(e){return e?.animationName||"none"}function w(n){const r=b(n),o=e.forwardRef(((n,o)=>{const{children:i,...a}=n,s=e.Children.toArray(i),c=s.find(E);if(c){const n=c.props.children,i=s.map((t=>t===c?e.Children.count(n)>1?e.Children.only(null):e.isValidElement(n)?n.props.children:null:t));return t(r,{...a,ref:o,children:e.isValidElement(n)?e.cloneElement(n,void 0,i):null})}return t(r,{...a,ref:o,children:i})}));return o.displayName=`${n}.Slot`,o}function b(n){const t=e.forwardRef(((n,t)=>{const{children:r,...o}=n;if(e.isValidElement(r)){const n=function(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;if(t)return e.ref;if(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,n){const t={...n};for(const r in n){const o=e[r],i=n[r];/^on[A-Z]/.test(r)?o&&i?t[r]=(...e)=>{i(...e),o(...e)}:o&&(t[r]=o):"style"===r?t[r]={...o,...i}:"className"===r&&(t[r]=[o,i].filter(Boolean).join(" "))}return{...e,...t}}(o,r.props);return r.type!==e.Fragment&&(i.ref=t?g(t,n):n),e.cloneElement(r,i)}return e.Children.count(r)>1?e.Children.only(null):null}));return t.displayName=`${n}.SlotClone`,t}O.displayName="Presence";var R=Symbol("radix.slottable");function E(n){return e.isValidElement(n)&&"function"==typeof n.type&&"__radixId"in n.type&&n.type.__radixId===R}var _=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((n,r)=>{const o=w(`Primitive.${r}`),i=e.forwardRef(((e,n)=>{const{asChild:i,...a}=e,s=i?o:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),t(s,{...a,ref:n})}));return i.displayName=`Primitive.${r}`,{...n,[r]:i}}),{});function A(n){const t=e.useRef(n);return e.useEffect((()=>{t.current=n})),e.useMemo((()=>(...e)=>t.current?.(...e)),[])}function x({prop:n,defaultProp:t,onChange:r=(()=>{})}){const[o,i]=function({defaultProp:n,onChange:t}){const r=e.useState(n),[o]=r,i=e.useRef(o),a=A(t);return e.useEffect((()=>{i.current!==o&&(a(o),i.current=o)}),[o,i,a]),r}({defaultProp:t,onChange:r}),a=void 0!==n,s=a?n:o,c=A(r);return[s,e.useCallback((e=>{if(a){const t="function"==typeof e?e(n):e;t!==n&&c(t)}else i(e)}),[a,n,i,c])]}var M="Popover",[D,F]=function(n,r=[]){let o=[];const i=()=>{const t=o.map((n=>e.createContext(n)));return function(r){const o=r?.[n]||t;return e.useMemo((()=>({[`__scope${n}`]:{...r,[n]:o}})),[r,o])}};return i.scopeName=n,[function(r,i){const a=e.createContext(i),s=o.length;o=[...o,i];const c=r=>{const{scope:o,children:i,...c}=r,u=o?.[n]?.[s]||a,l=e.useMemo((()=>c),Object.values(c));return t(u.Provider,{value:l,children:i})};return c.displayName=r+"Provider",[c,function(t,o){const c=o?.[n]?.[s]||a,u=e.useContext(c);if(u)return u;if(void 0!==i)return i;throw new Error(`\`${t}\` must be used within \`${r}\``)}]},y(i,...r)]}(M,[l]),I=l(),[T,j]=D(M),S=n=>{const{__scopePopover:r,children:o,open:i,defaultOpen:a,onOpenChange:s,modal:c=!1}=n,l=I(r),d=e.useRef(null),[p,f]=e.useState(!1),[h=!1,v]=x({prop:i,defaultProp:a,onChange:s});return t(m,{...l,children:t(T,{scope:r,contentId:u(),triggerRef:d,open:h,onOpenChange:v,onOpenToggle:e.useCallback((()=>v((e=>!e))),[v]),hasCustomAnchor:p,onCustomAnchorAdd:e.useCallback((()=>f(!0)),[]),onCustomAnchorRemove:e.useCallback((()=>f(!1)),[]),modal:c,children:o})})};S.displayName=M;var k="PopoverAnchor",U=e.forwardRef(((n,r)=>{const{__scopePopover:o,...i}=n,a=j(k,o),s=I(o),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=a;return e.useEffect((()=>(c(),()=>u())),[c,u]),t(d,{...s,...i,ref:r})}));U.displayName=k;var $="PopoverTrigger",L=e.forwardRef(((e,n)=>{const{__scopePopover:r,...o}=e,i=j($,r),a=I(r),s=C(n,i.triggerRef),c=t(_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Y(i.open),...o,ref:s,onClick:h(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:t(d,{asChild:!0,...a,children:c})}));L.displayName=$;var W="PopoverPortal",[V,K]=D(W,{forceMount:void 0}),Z=e=>{const{__scopePopover:n,forceMount:r,children:o,container:i}=e,a=j(W,n);return t(V,{scope:n,forceMount:r,children:t(O,{present:r||a.open,children:t(c,{asChild:!0,container:i,children:o})})})};Z.displayName=W;var z="PopoverContent",B=e.forwardRef(((e,n)=>{const r=K(z,e.__scopePopover),{forceMount:o=r.forceMount,...i}=e,a=j(z,e.__scopePopover);return t(O,{present:o||a.open,children:a.modal?t(G,{...i,ref:n}):t(H,{...i,ref:n})})}));B.displayName=z;var q=w("PopoverContent.RemoveScroll"),G=e.forwardRef(((n,i)=>{const a=j(z,n.__scopePopover),s=e.useRef(null),c=C(i,s),u=e.useRef(!1);return e.useEffect((()=>{const e=s.current;if(e)return r(e)}),[]),t(o,{as:q,allowPinchZoom:!0,children:t(J,{...n,ref:c,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h(n.onCloseAutoFocus,(e=>{e.preventDefault(),u.current||a.triggerRef.current?.focus()})),onPointerDownOutside:h(n.onPointerDownOutside,(e=>{const n=e.detail.originalEvent,t=0===n.button&&!0===n.ctrlKey,r=2===n.button||t;u.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:h(n.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),H=e.forwardRef(((n,r)=>{const o=j(z,n.__scopePopover),i=e.useRef(!1),a=e.useRef(!1);return t(J,{...n,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{n.onCloseAutoFocus?.(e),e.defaultPrevented||(i.current||o.triggerRef.current?.focus(),e.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:e=>{n.onInteractOutside?.(e),e.defaultPrevented||(i.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const t=e.target,r=o.triggerRef.current?.contains(t);r&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}})})),J=e.forwardRef(((e,n)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,...v}=e,g=j(z,r),C=I(r);return i(),t(a,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:c,onUnmountAutoFocus:u,children:t(s,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onDismiss:()=>g.onOpenChange(!1),children:t(p,{"data-state":Y(g.open),role:"dialog",id:g.contentId,...C,...v,ref:n,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),Q="PopoverClose",X=e.forwardRef(((e,n)=>{const{__scopePopover:r,...o}=e,i=j(Q,r);return t(_.button,{type:"button",...o,ref:n,onClick:h(e.onClick,(()=>i.onOpenChange(!1)))})}));X.displayName=Q;function Y(e){return e?"open":"closed"}e.forwardRef(((e,n)=>{const{__scopePopover:r,...o}=e,i=I(r);return t(f,{...i,...o,ref:n})})).displayName="PopoverArrow";var ee=S,ne=U,te=L,re=Z,oe=B,ie=X;const ae=["top","right","bottom","left"],se=["start","center","end"];function ce({open:n,defaultOpen:t,onOpenChange:r,children:o}){return e.createElement(ee,{open:n,defaultOpen:t,onOpenChange:r},o)}function ue({asChild:n,disabled:t,className:r,children:o}){return e.createElement(te,{asChild:n,disabled:t,className:r},o)}function le({side:t="bottom",align:r="center",sideOffset:o=4,className:i,children:a,ariaLabel:s}){return e.createElement(re,null,e.createElement(oe,{side:t,align:r,sideOffset:o,"aria-label":s,className:n("foundation-web-portal-zindex",i)},a))}function de({asChild:n,className:t,children:r}){return e.createElement(ie,{asChild:n,className:t},r)}function pe({asChild:n,className:t,children:r}){return e.createElement(ne,{asChild:n,className:t},r)}export{ce as Popover,pe as PopoverAnchor,de as PopoverClose,le as PopoverContent,ue as PopoverTrigger,ce as default,se as popoverAligns,ae as popoverSides};
